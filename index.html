<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Farmacias de Turno en Villa la Angostura">
    <meta name="robots" content="index">
    <title>Farmacia de turno</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2" crossorigin="anonymous"></script>
    <script src="dias_de_turno.js"></script>
    <link rel="shortcut icon" href="logo_farmacia.png">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.4/moment.min.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css" integrity="sha512-1sCRPdkRXhBV2PBLUdRb4tMg1w2YPf37qatUFeS7zlBy7jJI8Lf4VHwWfZZfpXtYSLy85pkm9GaYVYMfw5BC1A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
    <link href='https://fonts.googleapis.com/css?family=Raleway:400,300,700' rel='stylesheet' type='text/css'>
    <style>
        body {
            font-family: 'Raleway', sans-serif !important;
        }
        .borde1{
            border-radius: 0.9rem;
        }
        .borde2{
            border-radius: 0.5rem;
        }  
    </style>
</head>
<body class="bg-light">
    <div class="container-xxl text-success align-self-center">
        <div class="row h-25 pt-2 mb-3 mt-1 bg-success text-light borde1">
            <h1 class="text-center">Farmacias de Turno</h1>
            <h6 class="text-center">Villa la Angostura</h6>
        </div>
        <div class="row h-50 mb-3">
            <div class="col"></div>
            <div class="col col-lg-2">
                <div class="row mb-1"><input type="date" required class="borde2" id="calendario"></div>
                <div class="row"><button type="button" class="btn btn-success borde2" id="boton1">Consultar</button> 
               
            </div>
            </div>
            <div class="col"></div>
        </div>
        <div class="container-xxl align-self-center">
            <div class="row mw-100">
                <div class="h-25 card col-lg-5 col-sm-10 m-1 align-self-center" id="card1">
                    <div class="text-center card-header">
                        <h3 class="nombreTurnoHoy">Hoy está de turno: <span class="nombreFarmacia"></span></h3>
                    </div>
                    <div class="text-center card-header" style="display:none;" class="nombreTurnoFuturo">
                        <h3 style="display:none;" class="text-center nombreTurnoFuturo">Estará de turno: <span class="nombreFarmacia"></span></h3>
                    </div>
                    <div class="col ratio ratio-4x3 text-center card-body" id="iframeMapa">
                        <iframe id='iframe' src='' loading='lazy' referrerpolicy='no-referrer-when-downgrade'></iframe>
                    </div>
                    <div class="card-footer">
                        <h6 class="text-center ">Dirección: <span id="direccionFarmacia"></span></h6>
                    </div>
                </div>
                <div class="h-25 card col-lg-5 col-sm-10 m-1 align-self-center" id="card2">
                    <h3 class="text-center card-header nombreTurnoHoy">Hoy está de turno: <span class="nombreFarmacia2"></span></h3>
                    <h3 style="display:none;" class="text-center nombreTurnoFuturo">Estará de turno: <span class="nombreFarmacia2"></span></h3>
                    <div class="col ratio ratio-4x3 text-center card-body" id="iframeMapa2">
                        <iframe id='iframe2' src='' loading='lazy' referrerpolicy='no-referrer-when-downgrade'></iframe>
                    </div>
                    <div class="card-footer">
                        <h6 class="text-center ">Dirección: <span id="direccionFarmacia2"></span></h6>
                    </div>
                </div>
            </div>
        </div>
        <div class="row mb-1">
            <div class="col mt-2">
                <div class="row justify-content-end">
                    <div class="invisible"></div>
                    <div class="col offset-md-11">
                        <button id="copiar" title="Copia" class="btn mt-1" data-clipboard-text="<iframe src='http://turnosvla.fiqus.coop/index_for_embed.html'></iframe>">
                            <i class="bi bi-clipboard-check-fill"></i>
                        </button>
                        <h6 class="invisible" id="alertaCopiado">Copiado!</h6>
                    </div>
                </div>
            </div>
        </div>
        <footer class="bg-light text-center text-lg-start">
            <div class="text-center p-3">
              2022 Copyleft:
              <span>Cooperativa Escolar Forsyx (DJN)</span>
            </div>
        </footer>
    </div>
</body>

</html>
<script>
   $("#card2").hide();
   $(document).ready(function () {
        const hoy =moment().format('YYYY-MM-DD')
        const datePicker = document.getElementById("calendario")
        datePicker.setAttribute("min", hoy);
        datePicker.setAttribute('value',hoy)
        let infoDeFarmacia=verificarFecha();
        $(".nombreFarmacia").html(infoDeFarmacia.nombre);
        $('#iframe').attr({src:infoDeFarmacia.ubicaciones});     
        $("#direccionFarmacia").html(infoDeFarmacia.direcciones[0]);
        $("#boton1").click(function () {
            let dateString = $("#calendario").val();
            if (dateString == hoy) {
                $(".nombreTurnoHoy").show();
                $(".nombreTurnoFuturo").hide();
            } else {
                $(".nombreTurnoFuturo").show();
                $(".nombreTurnoHoy").hide();
            };
            infoDeFarmacia = verificarFecha(dateString);            
       
            $(".nombreFarmacia").html(infoDeFarmacia.nombre[0]);
            if (infoDeFarmacia.ubicaciones.length == 2) {
                $("#card2").show();
                $("#iframe2").attr({src:infoDeFarmacia.ubicaciones[1]});
                $("#direccionFarmacia2").html(infoDeFarmacia.direcciones[1]);
                $(".nombreFarmacia2").html(infoDeFarmacia.nombre[1])
            } else {
                $("#card2").hide();
            };
            $('#iframe').attr({src:infoDeFarmacia.ubicaciones[0]});
            $("#direccionFarmacia").html(infoDeFarmacia.direcciones[0]);
        });

        $("#copiar").click(function () {
            $("#alertaCopiado").removeClass("invisible");
            $("#alertaCopiado").addClass("visible");
            setTimeout(() => {
                $("#alertaCopiado").removeClass("visible");
                $("#alertaCopiado").addClass("invisible");
            }, 2000);
        });

        var clipboard = new ClipboardJS(".btn");

        clipboard.on('success', function (e) {
        console.info('Action:', e.action);
        console.info('Text:', e.text);
        console.info('Trigger:', e.trigger);
        });

        clipboard.on('error', function (e) {
        console.info('Action:', e.action);
        console.info('Text:', e.text);
        console.info('Trigger:', e.trigger);
        });
    });
</script>
